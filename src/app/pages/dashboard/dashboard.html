<div class="container p-2 pb-0" [class.visually-hidden]="!!carregando()">
  <mat-card
    class="p-2"
    appearance="filled"
    (click)="navegarPainelFaturas()"
    role="button"
    tabindex="0"
    (keydown.enter)="navegarPainelFaturas()"
    (keydown.space)="navegarPainelFaturas()"
    aria-label="Ver painel de faturas"
  >
    <mat-card-header class="p-0 d-flex justify-content-center">
      <mat-card-title>{{
        faturaAtiva().nome_fatura || "Nenhuma fatura selecionada"
      }}</mat-card-title>
    </mat-card-header>
    <mat-card-content class="p-0 text-center">
        @if(faturaAtiva().codigo_fatura) {
        {{ formatarParaData(faturaAtiva().data_abertura_fatura) }} -
        {{ formatarParaData(faturaAtiva().data_fechamento_fatura) }}
        } @else { Mostrando compras dos Ãºltimos 30 dias }
      </mat-card-content>
  </mat-card>
</div>
<div
  class="container p-1 d-flex flex-wrap"
  [class.visually-hidden]="carregando()"
>
  <div class="w-50 p-1">
    <mat-card
      class="h-100"
      appearance="filled"
      (click)="navegarExtrato(0)"
      role="button"
      tabindex="0"
      (keydown.enter)="navegarExtrato(0)"
      (keydown.space)="navegarExtrato(0)"
      aria-label="Ver extrato total de compras"
    >
      <mat-card-header class="d-flex justify-content-center">
        <mat-card-title>{{
          formatarParaReal(somaCategoria(0))
        }}</mat-card-title>
      </mat-card-header>
      <mat-card-content
        class="h-100 d-flex align-items-end justify-content-center"
      >
        <span>TOTAL DE COMPRAS</span>
      </mat-card-content>
    </mat-card>
  </div>
  @for(codigo of codigosCategoriaCompra(); track codigo){
  <div class="w-50 p-1">
    <mat-card
      appearance="filled"
      (click)="navegarExtrato(codigo)"
      role="button"
      tabindex="0"
      (keydown.enter)="navegarExtrato(codigo)"
      (keydown.space)="navegarExtrato(codigo)"
      [attr.aria-label]="
        'Ver extrato da categoria ' + categoriaCompra(codigo).nome
      "
    >
      <mat-card-header class="d-flex justify-content-center">
        <mat-card-title>{{
          formatarParaReal(somaCategoria(codigo))
        }}</mat-card-title>
      </mat-card-header>
      <mat-card-content class="d-flex flex-column align-items-center">
        <span
          ><mat-icon>{{ categoriaCompra(codigo).icon }}</mat-icon></span
        >
        <span>{{ categoriaCompra(codigo).nome }}</span>
      </mat-card-content>
    </mat-card>
  </div>
  }
</div>
